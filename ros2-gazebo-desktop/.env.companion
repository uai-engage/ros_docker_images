# Environment variables for Companion Computer Only Setup
# Copy this to .env when deploying companion on separate machine
# Example: Raspberry Pi, Jetson, or other onboard computer

# ============================================
# User Configuration
# ============================================
USERNAME=rosuser
USER_UID=1000
USER_GID=1000

# ============================================
# Container Name
# ============================================
CONTAINER_NAME=ros2_companion

# ============================================
# ROS 2 Configuration
# ============================================
# CRITICAL: Must match ground station ROS_DOMAIN_ID for topic discovery
ROS_DOMAIN_ID=0
RMW_IMPLEMENTATION=rmw_fastrtps_cpp

# ============================================
# Workspace Directory
# ============================================
# Local directory for custom packages (mounted into container)
HOST_WORKSPACE=./companion_ws

# ============================================
# Flight Controller Configuration
# ============================================
# PX4 micro-ROS agent settings
XRCE_DDS_PORT=8888

# MAVROS FCU connection (for ArduPilot)
# Connection options:
#   Serial: /dev/ttyUSB0:921600 or /dev/ttyACM0:921600
#   UDP:    udp://:14550@
#   TCP:    tcp://192.168.1.100:5760
FCU_URL=udp://:14550@

# ============================================
# Network Configuration Notes
# ============================================
# The companion uses host network mode to enable ROS 2 DDS discovery
#
# For ROS 2 communication with ground station:
# 1. Both companion and ground station must be on same network
# 2. Both must have same ROS_DOMAIN_ID
# 3. Firewall must allow UDP multicast (ports 7400-7500)
# 4. Both should use same RMW_IMPLEMENTATION
#
# PX4 Connection:
# - UDP: PX4 sends to companion IP:XRCE_DDS_PORT
# - Serial: Direct USB/UART connection
#
# ArduPilot Connection:
# - UDP: ArduPilot broadcasts MAVLink to :14550
# - Serial: Direct USB/UART connection

# ============================================
# Deployment Instructions
# ============================================
# 1. Copy this file to target machine (Raspberry Pi, Jetson)
# 2. Rename to .env: cp .env.companion .env
# 3. Edit ROS_DOMAIN_ID to match ground station
# 4. Edit FCU_URL for your flight controller connection
# 5. Build: docker compose -f docker-compose-companion.yml build
# 6. Run: docker compose -f docker-compose-companion.yml up -d
# 7. Start micro-ROS agent or MAVROS inside container

# ============================================
# Firewall Configuration (if needed)
# ============================================
# On companion machine:
#   sudo ufw allow from 192.168.1.0/24  # Your network subnet
#   sudo ufw allow 7400:7500/udp        # ROS 2 DDS discovery
#   sudo ufw allow 8888/udp             # PX4 micro-ROS (if UDP)
#   sudo ufw allow 14550/udp            # ArduPilot MAVLink
